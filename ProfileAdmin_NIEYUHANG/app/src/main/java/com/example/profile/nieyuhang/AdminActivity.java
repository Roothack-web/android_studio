package com.example.profile.nieyuhang;import android.content.SharedPreferences;import android.os.Bundle;import android.widget.ArrayAdapter;import android.widget.Button;import android.widget.ListView;import android.widget.TextView;import android.widget.Toast;import androidx.appcompat.app.AlertDialog;import androidx.appcompat.app.AppCompatActivity;import java.util.List;public class AdminActivity extends AppCompatActivity{DBHelper db; SharedPreferences prefs; @Override protected void onCreate(Bundle s){super.onCreate(s); setContentView(R.layout.activity_admin); db=new DBHelper(this); prefs=getSharedPreferences("admin_prefs",MODE_PRIVATE); TextView tv=findViewById(R.id.tvAdminTitle); tv.setText("NIEYUHANG 的管理员页面"); ListView lv=findViewById(R.id.lvUsers); List<String> users=db.getAllUsernames(); lv.setAdapter(new ArrayAdapter<>(this,android.R.layout.simple_list_item_1,users)); Button btn=findViewById(R.id.btnChangeAdminPass); btn.setOnClickListener(v->{ final EditText input=new EditText(this); new AlertDialog.Builder(this).setTitle("修改管理员密码").setView(input).setPositiveButton("确定",(d,w)->{ String np=input.getText().toString().trim(); if(np.isEmpty()){ Toast.makeText(this,"不能为空",Toast.LENGTH_SHORT).show(); return; } prefs.edit().putString("admin_password",np).apply(); Toast.makeText(this,"更新成功",Toast.LENGTH_SHORT).show(); }).setNegativeButton("取消",null).show(); }); }}